kafka分区设计多少,要根据生产者速率,消费者速率,消息体多长 算法:要知道每一个分区的qps能撑多少,max(发送者总速率/单一分区写入速率,发送这总速率/单一消费者速率) + buffer
,正常情况下同一个topic的分区会尽量均匀分散到所有broker上,意味着:第一主分区之间.不会在同一个broker上,第二:同一个分区的主分区和从分区,也不会在同一个broker上,如果要保证消息的有序,就要保证消息发送到同一个分区,消息重复消费可能源自,生产者重复发送或者消费者消费成功但是没有提交


kafka面试 消息积压 > 异步消费 > 消息消费但没提交 > 批量提交 > 重试 > 怎么做幂等 > 利用redis的高可用
                            >数据库压力大 > 批量接口提交 > 核心就是单个操作变成批量 > 引入mvcc原理
